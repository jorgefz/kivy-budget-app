#:import get_color_from_hex kivy.utils.get_color_from_hex
#:import KivyGraph kivy_garden.graph.Graph
#:import calendar calendar

MDScreen:

	MDBoxLayout:
		orientation: 'horizontal'

		MDNavigationRail:
			id: rail
			hover_bg: (0.0, 0.0, 0.0, 0.2)
			use_hover_behavior: True
			anchor: "center"
			color_active: get_color_from_hex("#f3ab44")

			MDNavigationRailItem:
				icon: "home"
				on_release: screen_manager.current = 'Home'

			MDNavigationRailItem:
				icon: "chart-line"
				on_release: screen_manager.current = 'Graphs'
			
			MDNavigationRailItem:
				icon: "database"
				on_release: screen_manager.current = 'Data'

		MDBoxLayout:
			orientation: 'vertical'
		
			MDToolbar:
				title: "Budget App"
				pos_hint: {"top": 1}
				height: "30dp"
			
			ScreenManager:
				id: screen_manager
				HomeScreen:
				GraphScreen:
				DataTableScreen:

<HomeScreen>:
	name: "Home"
	datetime_label: datetime_label

	MDLabel:
		id: datetime_label
		text: root.date + "\n" + root.time
		pos_hint: {"center_y": 0.90, "center_x": 0.55}
		theme_text_color: "Primary"
		font_style: "H4"
	
	MDFloatLayout:
		pos_hint: {'center_x': 0.50, 'center_y': 0.6}
		MDLabel:
			text: "Balance"
			pos_hint: {"center_y": 0.65, "center_x": 0.55}
			theme_text_color: "Primary"
			font_style: "H4"
		MDLabel:
			text: app.balance_text
			pos_hint: {"center_y": 0.55, "center_x": 0.55}
			theme_text_color: "Primary"
			font_style: "H3"

	MDFloatLayout:
		pos_hint: {'center_x': 0.50, 'center_y': 0.4}
		MDLabel:
			text: "Income"
			pos_hint: {"center_y": 0.65, "center_x": 0.55}
			theme_text_color: "Primary"
			font_style: "H4"
		MDLabel:
			text: app.income_text
			pos_hint: {"center_y": 0.55, "center_x": 0.55}
			theme_text_color: "Custom"
			text_color: "#00FF00"
			font_style: "H3"
	
	MDFloatLayout:
		pos_hint: {'center_x': 0.50, 'center_y': 0.4}
		MDLabel:
			text: "Profit"
			pos_hint: {"center_y": 0.65, "center_x": 0.85}
			theme_text_color: "Primary"
			font_style: "H4"
		MDLabel:
			text: app.profit_text
			pos_hint: {"center_y": 0.55, "center_x": 0.85}
			theme_text_color: "Custom"
			text_color: "#FFFF00"
			font_style: "H3"

	MDFloatLayout:
		pos_hint: {'center_x': 0.50, 'center_y': 0.4}
		MDLabel:
			text: "Expenses"
			pos_hint: {"center_y": 0.65, "center_x": 1.15}
			theme_text_color: "Primary"
			font_style: "H4"
		MDLabel:
			text: app.expenses_text
			pos_hint: {"center_y": 0.55, "center_x": 1.15}
			theme_text_color: "Custom"
			text_color: "#FF0000"
			font_style: "H3"

<GraphScreen>:
	name: "Graphs"
	dataset: app.dataset
	each_day: app.each_day

	MDLabel:
		text: "Balance over time"
		pos_hint: {"center_y": 0.95}
		halign: "center"
		theme_text_color: "Primary"
		font_style: "H4"

	MDRaisedButton:
		id: month_selection
		size: (150, 20)
		size_hint: (None,None)
		pos_hint: {'center_y': 0.6, 'center_x': 0.1}
		text: "All Year"
		font_size: 18
		on_release: root.month_dropdown.open()

	MDRaisedButton:
		id: year_selection
		size: (150, 20)
		size_hint: (None,None)
		pos_hint: {'center_y': 0.7, 'center_x': 0.1}
		text: "2022"
		font_size: 18
		on_release: root.year_dropdown.open()
	

<DataTableScreen>:
	name: "Data"
	dataset: app.dataset
	columns: ["date", "amount", "balance"]

